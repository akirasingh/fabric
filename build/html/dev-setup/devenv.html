
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Setting up the development environment &#8212; hyperledger-fabricdocs master documentation</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building Hyperledger Fabric" href="build.html" />
    <link rel="prev" title="Style guide for contributors" href="../style_guide.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <p class="title">hyperledger-fabricdocs</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../intro.html">Introduction</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../whatsnew.html">What’s new in Hyperledger Fabric v2.x</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href=""></a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../key_concepts.html">Key Concepts</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started.html">Getting Started - Install</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started_run_fabric.html">Getting Started - Run Fabric</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../developapps/developing_applications.html">Developing Applications</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../tutorials.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../deployment_guide_overview.html">Deploying a production network</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../ops_guide.html">Operations Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../upgrade.html">Upgrading to the latest release</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../command_ref.html">Commands Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../architecture.html">Architecture Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../Fabric-FAQ.html">Frequently Asked Questions</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../CONTRIBUTING.html">Contributions Welcome!</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../glossary.html">Glossary</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../releases.html">Releases</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../questions.html">Still Have Questions?</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../status.html">Status</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          
        
        
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#prerequisites" class="nav-link">Prerequisites</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#steps" class="nav-link">Steps</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#install-the-prerequisites" class="nav-link">Install the Prerequisites</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#developing-on-windows" class="nav-link">Developing on Windows</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#clone-the-hyperledger-fabric-source" class="nav-link">Clone the Hyperledger Fabric source</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#configure-softhsm" class="nav-link">Configure SoftHSM</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#debugging-with-pkcs11-spy" class="nav-link">Debugging with pkcs11-spy</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#install-the-development-tools" class="nav-link">Install the development tools</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="setting-up-the-development-environment">
<h1>Setting up the development environment<a class="headerlink" href="#setting-up-the-development-environment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git client</a></p></li>
<li><p><a class="reference external" href="https://golang.org/dl/">Go</a> version 1.15.x</p></li>
<li><p><a class="reference external" href="https://docs.docker.com/get-docker/">Docker</a> version 18.03 or later</p></li>
<li><p>(macOS) <a class="reference external" href="https://developer.apple.com/downloads/">Xcode Command Line Tools</a></p></li>
<li><p><a class="reference external" href="https://github.com/opendnssec/SoftHSMv2">SoftHSM</a></p></li>
<li><p><a class="reference external" href="https://stedolan.github.io/jq/download/">jq</a></p></li>
</ul>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-the-prerequisites">
<h3>Install the Prerequisites<a class="headerlink" href="#install-the-prerequisites" title="Permalink to this headline">¶</a></h3>
<p>For macOS, we recommend using <a class="reference external" href="https://brew.sh">Homebrew</a> to manage the
development prereqs. The Xcode command line tools will be installed as part of
the Homebrew installation.</p>
<p>Once Homebrew is ready, installing the necessary prerequisites is very easy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">git</span> <span class="n">go</span> <span class="n">jq</span> <span class="n">softhsm</span>
<span class="n">brew</span> <span class="n">cask</span> <span class="n">install</span> <span class="o">--</span><span class="n">appdir</span><span class="o">=</span><span class="s2">&quot;/Applications&quot;</span> <span class="n">docker</span>
</pre></div>
</div>
<p>Docker Desktop must be launched to complete the installation so be sure to open
the application after installing it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">open</span> <span class="o">/</span><span class="n">Applications</span><span class="o">/</span><span class="n">Docker</span><span class="o">.</span><span class="n">app</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="developing-on-windows">
<h2>Developing on Windows<a class="headerlink" href="#developing-on-windows" title="Permalink to this headline">¶</a></h2>
<p>On Windows 10 you should use the native Docker distribution and you
may use the Windows PowerShell. However, for the <code class="docutils literal notranslate"><span class="pre">binaries</span></code>
command to succeed you will still need to have the <code class="docutils literal notranslate"><span class="pre">uname</span></code> command
available. You can get it as part of Git but beware that only the
64bit version is supported.</p>
<p>Before running any <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> commands, run the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">core</span><span class="o">.</span><span class="n">autocrlf</span> <span class="n">false</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">core</span><span class="o">.</span><span class="n">longpaths</span> <span class="n">true</span>
</pre></div>
</div>
<p>You can check the setting of these parameters with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">get</span> <span class="n">core</span><span class="o">.</span><span class="n">autocrlf</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">get</span> <span class="n">core</span><span class="o">.</span><span class="n">longpaths</span>
</pre></div>
</div>
<p>These need to be <code class="docutils literal notranslate"><span class="pre">false</span></code> and <code class="docutils literal notranslate"><span class="pre">true</span></code> respectively.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">curl</span></code> command that comes with Git and Docker Toolbox is old and
does not handle properly the redirect used in
<a class="reference internal" href="../getting_started.html"><span class="doc">Getting Started - Install</span></a>. Make sure you have and use a newer version
which can be downloaded from the <a class="reference external" href="https://curl.haxx.se/download.html">cURL downloads page</a></p>
<div class="section" id="clone-the-hyperledger-fabric-source">
<h3>Clone the Hyperledger Fabric source<a class="headerlink" href="#clone-the-hyperledger-fabric-source" title="Permalink to this headline">¶</a></h3>
<p>First navigate to <a class="reference external" href="https://github.com/hyperledger/fabric">https://github.com/hyperledger/fabric</a> and fork the fabric
repository using the fork button in the top-right corner. After forking, clone
the repository.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">your_github_userid</span><span class="o">&gt;</span>
<span class="n">cd</span> <span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">your_github_userid</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/&lt;</span><span class="n">your_github_userid</span><span class="o">&gt;/</span><span class="n">fabric</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are running Windows, before cloning the repository, run the following
command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">get</span> <span class="n">core</span><span class="o">.</span><span class="n">autocrlf</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">core.autocrlf</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, you must set it to <code class="docutils literal notranslate"><span class="pre">false</span></code> by
running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">core</span><span class="o">.</span><span class="n">autocrlf</span> <span class="n">false</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configure-softhsm">
<h3>Configure SoftHSM<a class="headerlink" href="#configure-softhsm" title="Permalink to this headline">¶</a></h3>
<p>A PKCS #11 cryptographic token implementation is required to run the unit
tests. The PKCS #11 API is used by the bccsp component of Fabric to interact
with hardware security modules (HSMs) that store cryptographic information and
perform cryptographic computations.  For test environments, SoftHSM can be used
to satisfy this requirement.</p>
<p>SoftHSM generally requires additional configuration before it can be used. For
example, the default configuration will attempt to store token data in a system
directory that unprivileged users are unable to write to.</p>
<p>SoftHSM configuration typically involves copying <code class="docutils literal notranslate"><span class="pre">/etc/softhsm/softhsm2.conf</span></code> to
<code class="docutils literal notranslate"><span class="pre">$HOME/.config/softhsm2/softhsm2.conf</span></code> and changing <code class="docutils literal notranslate"><span class="pre">directories.tokendir</span></code>
to an appropriate location. Please see the man page for <code class="docutils literal notranslate"><span class="pre">softhsm2.conf</span></code> for
details.</p>
<p>After SoftHSM has been configured, the following command can be used to
initialize the token required by the unit tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">softhsm2</span><span class="o">-</span><span class="n">util</span> <span class="o">--</span><span class="n">init</span><span class="o">-</span><span class="n">token</span> <span class="o">--</span><span class="n">slot</span> <span class="mi">0</span> <span class="o">--</span><span class="n">label</span> <span class="n">ForFabric</span> <span class="o">--</span><span class="n">so</span><span class="o">-</span><span class="n">pin</span> <span class="mi">1234</span> <span class="o">--</span><span class="n">pin</span> <span class="mi">98765432</span>
</pre></div>
</div>
<p>If tests are unable to locate the libsofthsm2.so library in your environment,
specify the library path, the PIN, and the label of your token in the
appropriate environment variables. For example, on macOS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PKCS11_LIB</span><span class="o">=</span><span class="s2">&quot;/usr/local/Cellar/softhsm/2.6.1/lib/softhsm/libsofthsm2.so&quot;</span>
<span class="n">export</span> <span class="n">PKCS11_PIN</span><span class="o">=</span><span class="mi">98765432</span>
<span class="n">export</span> <span class="n">PKCS11_LABEL</span><span class="o">=</span><span class="s2">&quot;ForFabric&quot;</span>
</pre></div>
</div>
<p>The tests don’t always clean up after themselves and, over time, this causes
the PKCS #11 tests to take a long time to run. The easiest way to recover from
this is to delete and recreate the token.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">softhsm2</span><span class="o">-</span><span class="n">util</span> <span class="o">--</span><span class="n">delete</span><span class="o">-</span><span class="n">token</span> <span class="o">--</span><span class="n">token</span> <span class="n">ForFabric</span>
<span class="n">softhsm2</span><span class="o">-</span><span class="n">util</span> <span class="o">--</span><span class="n">init</span><span class="o">-</span><span class="n">token</span> <span class="o">--</span><span class="n">slot</span> <span class="mi">0</span> <span class="o">--</span><span class="n">label</span> <span class="n">ForFabric</span> <span class="o">--</span><span class="n">so</span><span class="o">-</span><span class="n">pin</span> <span class="mi">1234</span> <span class="o">--</span><span class="n">pin</span> <span class="mi">98765432</span>
</pre></div>
</div>
</div>
<div class="section" id="debugging-with-pkcs11-spy">
<h3>Debugging with <code class="docutils literal notranslate"><span class="pre">pkcs11-spy</span></code><a class="headerlink" href="#debugging-with-pkcs11-spy" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/OpenSC/OpenSC">OpenSC Project</a> provides a shared
library called <code class="docutils literal notranslate"><span class="pre">pkcs11-spy</span></code> that logs all interactions between an application
and a PKCS #11 module. This library can be very useful when troubleshooting
interactions with a cryptographic token device or service.</p>
<p>Once the library has been installed, configure Fabric to use <code class="docutils literal notranslate"><span class="pre">pkcs11-spy</span></code> as
the PKCS #11 library and set the <code class="docutils literal notranslate"><span class="pre">PKCS11SPY</span></code> environment variable to the real
library. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PKCS11_LIB</span><span class="o">=</span><span class="s2">&quot;/usr/lib/softhsm/libsofthsm2.so&quot;</span>
<span class="n">export</span> <span class="n">PKCS11SPY</span><span class="o">=</span><span class="s2">&quot;/usr/lib/x86_64-linux-gnu/pkcs11/pkcs11-spy.so&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="install-the-development-tools">
<h3>Install the development tools<a class="headerlink" href="#install-the-development-tools" title="Permalink to this headline">¶</a></h3>
<p>Once the repository is cloned, you can use <code class="docutils literal notranslate"><span class="pre">make</span></code> to install some of the
tools used in the development environment. By default, these tools will be
installed into <code class="docutils literal notranslate"><span class="pre">$HOME/go/bin</span></code>. Please be sure your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> includes that
directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">gotools</span>
</pre></div>
</div>
<p>After installing the tools, the build environment can be verified by running a
few commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">basic</span><span class="o">-</span><span class="n">checks</span> <span class="n">integration</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">prereqs</span>
<span class="n">ginkgo</span> <span class="o">-</span><span class="n">r</span> <span class="o">./</span><span class="n">integration</span><span class="o">/</span><span class="n">nwo</span>
</pre></div>
</div>
<p>If those commands completely successfully, you’re ready to Go!</p>
<p>If you plan to use the Hyperledger Fabric application SDKs then be sure to check out their prerequisites in the Node.js SDK <a class="reference external" href="https://github.com/hyperledger/fabric-sdk-node#build-and-test">README</a>, Java SDK <a class="reference external" href="https://github.com/hyperledger/fabric-gateway-java/blob/master/README.md">README</a>, and Go SDK <a class="reference external" href="https://github.com/hyperledger/fabric-sdk-go/blob/main/README.md">README</a>.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="../style_guide.html" title="previous page">Style guide for contributors</a>
    <a class='right-next' id="next-link" href="build.html" title="next page">Building Hyperledger Fabric</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
  </body>
</html>