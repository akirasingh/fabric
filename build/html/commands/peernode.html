
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>peer node &#8212; hyperledger-fabricdocs master documentation</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="osnadmin channel" href="osnadminchannel.html" />
    <link rel="prev" title="peer version" href="peerversion.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <p class="title">hyperledger-fabricdocs</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../intro.html">Introduction</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../whatsnew.html">Whatâ€™s new in Hyperledger Fabric v2.x</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href=""></a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../key_concepts.html">Key Concepts</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started.html">Getting Started - Install</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting_started_run_fabric.html">Getting Started - Run Fabric</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../developapps/developing_applications.html">Developing Applications</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../tutorials.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../deployment_guide_overview.html">Deploying a production network</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../ops_guide.html">Operations Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../upgrade.html">Upgrading to the latest release</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../command_ref.html">Commands Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../architecture.html">Architecture Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../Fabric-FAQ.html">Frequently Asked Questions</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../CONTRIBUTING.html">Contributions Welcome!</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../glossary.html">Glossary</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../releases.html">Releases</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../questions.html">Still Have Questions?</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../status.html">Status</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          
            
                <li class="">
                    <a href="peercommand.html">peer</a>
                </li>
            
          
            
                <li class="">
                    <a href="peerchaincode.html">peer chaincode</a>
                </li>
            
          
            
                <li class="">
                    <a href="peerlifecycle.html">peer lifecycle chaincode</a>
                </li>
            
          
            
                <li class="">
                    <a href="peerchannel.html">peer channel</a>
                </li>
            
          
            
                <li class="">
                    <a href="peersnapshot.html">peer snapshot</a>
                </li>
            
          
            
                <li class="">
                    <a href="peerversion.html">peer version</a>
                </li>
            
          
            
                <li class="active">
                    <a href="">peer node</a>
                </li>
            
          
            
                <li class="">
                    <a href="osnadminchannel.html">osnadmin channel</a>
                </li>
            
          
            
                <li class="">
                    <a href="configtxgen.html">configtxgen</a>
                </li>
            
          
            
                <li class="">
                    <a href="configtxlator.html">configtxlator</a>
                </li>
            
          
            
                <li class="">
                    <a href="cryptogen.html">cryptogen</a>
                </li>
            
          
            
                <li class="">
                    <a href="../discovery-cli.html">Service Discovery CLI</a>
                </li>
            
          
            
                <li class="">
                    <a href="fabric-ca-commands.html">Fabric-CA Commands</a>
                </li>
            
          
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#syntax" class="nav-link">Syntax</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-pause" class="nav-link">peer node pause</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-rebuild-dbs" class="nav-link">peer node rebuild-dbs</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-reset" class="nav-link">peer node reset</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-resume" class="nav-link">peer node resume</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-rollback" class="nav-link">peer node rollback</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-start" class="nav-link">peer node start</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#peer-node-upgrade-dbs" class="nav-link">peer node upgrade-dbs</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#example-usage" class="nav-link">Example Usage</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-pause-example" class="nav-link">peer node pause example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-rebuild-dbs-example" class="nav-link">peer node rebuild-dbs example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-reset-example" class="nav-link">peer node reset example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-resume-example" class="nav-link">peer node resume example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-rollback-example" class="nav-link">peer node rollback example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-start-example" class="nav-link">peer node start example</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#peer-node-upgrade-dbs-example" class="nav-link">peer node upgrade-dbs example</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <!---
 File generated by help_docs.sh. DO NOT EDIT.
 Please make changes to preamble and postscript wrappers as appropriate.
 ---><div class="section" id="peer-node">
<h1>peer node<a class="headerlink" href="#peer-node" title="Permalink to this headline">Â¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">peer</span> <span class="pre">node</span></code> command allows an administrator to start a peer node,
pause and resume a channel, rebuild databases, reset all channels in a peer to the genesis block,
rollback a channel to a given block number, and upgrade the database format.</p>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">peer</span> <span class="pre">node</span></code> command has the following subcommands:</p>
<ul class="simple">
<li><p>pause</p></li>
<li><p>rebuild-dbs</p></li>
<li><p>reset</p></li>
<li><p>resume</p></li>
<li><p>rollback</p></li>
<li><p>start</p></li>
<li><p>upgrade-dbs</p></li>
</ul>
</div>
<div class="section" id="peer-node-pause">
<h2>peer node pause<a class="headerlink" href="#peer-node-pause" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pauses</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">pause</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="k">for</span> <span class="n">the</span> <span class="n">paused</span> <span class="n">channel</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">pause</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">pause</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">pause</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-rebuild-dbs">
<h2>peer node rebuild-dbs<a class="headerlink" href="#peer-node-rebuild-dbs" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Drops</span> <span class="n">the</span> <span class="n">databases</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">channels</span> <span class="ow">and</span> <span class="n">rebuilds</span> <span class="n">them</span> <span class="n">upon</span> <span class="n">peer</span> <span class="n">restart</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">if</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">contains</span> <span class="nb">any</span> <span class="n">channel</span> <span class="n">that</span> <span class="n">was</span> <span class="n">bootstrapped</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">snapshot</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">rebuild</span><span class="o">-</span><span class="n">dbs</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">rebuild</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-reset">
<h2>peer node reset<a class="headerlink" href="#peer-node-reset" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Resets</span> <span class="nb">all</span> <span class="n">channels</span> <span class="n">to</span> <span class="n">the</span> <span class="n">genesis</span> <span class="n">block</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">the</span> <span class="n">reset</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="n">starting</span> <span class="k">with</span> <span class="n">block</span> <span class="n">number</span> <span class="n">one</span> <span class="kn">from</span> <span class="nn">an</span> <span class="n">orderer</span> <span class="ow">or</span> <span class="n">another</span> <span class="n">peer</span> <span class="n">to</span> <span class="n">rebuild</span> <span class="n">the</span> <span class="n">block</span> <span class="n">store</span> <span class="ow">and</span> <span class="n">state</span> <span class="n">database</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">if</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">contains</span> <span class="nb">any</span> <span class="n">channel</span> <span class="n">that</span> <span class="n">was</span> <span class="n">bootstrapped</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">snapshot</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">reset</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">reset</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-resume">
<h2>peer node resume<a class="headerlink" href="#peer-node-resume" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Resumes</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">on</span> <span class="n">the</span> <span class="n">peer</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">resume</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span> <span class="k">for</span> <span class="n">the</span> <span class="n">resumed</span> <span class="n">channel</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">resume</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">resume</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">resume</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-rollback">
<h2>peer node rollback<a class="headerlink" href="#peer-node-rollback" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Rolls</span> <span class="n">back</span> <span class="n">a</span> <span class="n">channel</span> <span class="n">to</span> <span class="n">a</span> <span class="n">specified</span> <span class="n">block</span> <span class="n">number</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">starts</span> <span class="n">after</span> <span class="n">the</span> <span class="n">rollback</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">blocks</span><span class="p">,</span> <span class="n">which</span> <span class="n">got</span> <span class="n">removed</span> <span class="n">during</span> <span class="n">the</span> <span class="n">rollback</span><span class="p">,</span> <span class="kn">from</span> <span class="nn">an</span> <span class="n">orderer</span> <span class="ow">or</span> <span class="n">another</span> <span class="n">peer</span> <span class="n">to</span> <span class="n">rebuild</span> <span class="n">the</span> <span class="n">block</span> <span class="n">store</span> <span class="ow">and</span> <span class="n">state</span> <span class="n">database</span><span class="o">.</span> <span class="n">The</span> <span class="n">command</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">supported</span> <span class="k">if</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">contains</span> <span class="nb">any</span> <span class="n">channel</span> <span class="n">that</span> <span class="n">was</span> <span class="n">bootstrapped</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">snapshot</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">rollback</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">b</span><span class="p">,</span> <span class="o">--</span><span class="n">blockNumber</span> <span class="n">uint</span>   <span class="n">Block</span> <span class="n">number</span> <span class="n">to</span> <span class="n">which</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">be</span> <span class="n">rolled</span> <span class="n">back</span> <span class="n">to</span><span class="o">.</span>
  <span class="o">-</span><span class="n">c</span><span class="p">,</span> <span class="o">--</span><span class="n">channelID</span> <span class="n">string</span>   <span class="n">Channel</span> <span class="n">to</span> <span class="n">rollback</span><span class="o">.</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>               <span class="n">help</span> <span class="k">for</span> <span class="n">rollback</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-start">
<h2>peer node start<a class="headerlink" href="#peer-node-start" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Starts</span> <span class="n">a</span> <span class="n">node</span> <span class="n">that</span> <span class="n">interacts</span> <span class="k">with</span> <span class="n">the</span> <span class="n">network</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">start</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>                <span class="n">help</span> <span class="k">for</span> <span class="n">start</span>
      <span class="o">--</span><span class="n">peer</span><span class="o">-</span><span class="n">chaincodedev</span>   <span class="n">start</span> <span class="n">peer</span> <span class="ow">in</span> <span class="n">chaincode</span> <span class="n">development</span> <span class="n">mode</span>
</pre></div>
</div>
</div>
<div class="section" id="peer-node-upgrade-dbs">
<h2>peer node upgrade-dbs<a class="headerlink" href="#peer-node-upgrade-dbs" title="Permalink to this headline">Â¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Upgrades</span> <span class="n">databases</span> <span class="n">by</span> <span class="n">directly</span> <span class="n">updating</span> <span class="n">the</span> <span class="n">database</span> <span class="nb">format</span> <span class="ow">or</span> <span class="n">dropping</span> <span class="n">the</span> <span class="n">databases</span><span class="o">.</span> <span class="n">Dropped</span> <span class="n">databases</span> <span class="n">will</span> <span class="n">be</span> <span class="n">rebuilt</span> <span class="k">with</span> <span class="n">new</span> <span class="nb">format</span> <span class="n">upon</span> <span class="n">peer</span> <span class="n">restart</span><span class="o">.</span> <span class="n">When</span> <span class="n">the</span> <span class="n">command</span> <span class="ow">is</span> <span class="n">executed</span><span class="p">,</span> <span class="n">the</span> <span class="n">peer</span> <span class="n">must</span> <span class="n">be</span> <span class="n">offline</span><span class="o">.</span>

<span class="n">Usage</span><span class="p">:</span>
  <span class="n">peer</span> <span class="n">node</span> <span class="n">upgrade</span><span class="o">-</span><span class="n">dbs</span> <span class="p">[</span><span class="n">flags</span><span class="p">]</span>

<span class="n">Flags</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>   <span class="n">help</span> <span class="k">for</span> <span class="n">upgrade</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
</div>
<div class="section" id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="peer-node-pause-example">
<h3>peer node pause example<a class="headerlink" href="#peer-node-pause-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">pause</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span>
</pre></div>
</div>
<p>pauses a channel on the peer. When the peer starts after pause, the paused channel will not be started
and the peer will not receive blocks for the paused channel.</p>
</div>
<div class="section" id="peer-node-rebuild-dbs-example">
<h3>peer node rebuild-dbs example<a class="headerlink" href="#peer-node-rebuild-dbs-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">rebuild</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
<p>drops the databases for all the channels. When the peer is started after running this command, the peer will
retrieve the blocks stored on the peer and rebuild the dropped databases for all the channels.</p>
</div>
<div class="section" id="peer-node-reset-example">
<h3>peer node reset example<a class="headerlink" href="#peer-node-reset-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">reset</span>
</pre></div>
</div>
<p>resets all channels in the peer to the genesis block, i.e., the first block in the channel. The command also records the pre-reset height of each channel in the file system. Note that the peer process should be stopped while executing this command. If the peer process is running, this command detects that and returns an error instead of performing the reset. When the peer is started after performing the reset, the peer will fetch the blocks for each channel which were removed by the reset command (either from other peers or orderers) and commit the blocks up to the pre-reset height. Until all channels reach the pre-reset height, the peer will not endorse any transactions.</p>
</div>
<div class="section" id="peer-node-resume-example">
<h3>peer node resume example<a class="headerlink" href="#peer-node-resume-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">resume</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span>
</pre></div>
</div>
<p>resumes a channel on the peer. When the peer starts after resume, the resumed channel will be started
and the peer will receive blocks for the resumed channel.</p>
</div>
<div class="section" id="peer-node-rollback-example">
<h3>peer node rollback example<a class="headerlink" href="#peer-node-rollback-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">rollback</span> <span class="o">-</span><span class="n">c</span> <span class="n">ch1</span> <span class="o">-</span><span class="n">b</span> <span class="mi">150</span>
</pre></div>
</div>
<p>rolls back the channel ch1 to block number 150. The command also records the pre-rolled back height of channel ch1 in the file system. Note that the peer should be stopped while executing this command. If the peer process is running, this command detects that and returns an error instead of performing the rollback. When the peer is started after performing the rollback, the peer will fetch the blocks for channel ch1 which were removed by the rollback command (either from other peers or orderers) and commit the blocks up to the pre-rolled back height. Until the channel ch1 reaches the pre-rolled back height, the peer will not endorse any transaction for any channel.</p>
</div>
<div class="section" id="peer-node-start-example">
<h3>peer node start example<a class="headerlink" href="#peer-node-start-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">start</span> <span class="o">--</span><span class="n">peer</span><span class="o">-</span><span class="n">chaincodedev</span>
</pre></div>
</div>
<p>starts a peer node in chaincode development mode. Normally chaincode containers are started
and maintained by peer. However in chaincode development mode, chaincode is built and started by the user. This mode is useful during chaincode development phase for iterative development.</p>
</div>
<div class="section" id="peer-node-upgrade-dbs-example">
<h3>peer node upgrade-dbs example<a class="headerlink" href="#peer-node-upgrade-dbs-example" title="Permalink to this headline">Â¶</a></h3>
<p>The following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">peer</span> <span class="n">node</span> <span class="n">upgrade</span><span class="o">-</span><span class="n">dbs</span>
</pre></div>
</div>
<p>checks the data format in the databases for all the channels and drops databases if data format is in the previous version.
The command will return an error if the data format is already up to date. When the peer is started after running this command,
the peer will retrieve the blocks stored on the peer and rebuild the dropped databases in the new format.</p>
<p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="peerversion.html" title="previous page">peer version</a>
    <a class='right-next' id="next-link" href="osnadminchannel.html" title="next page">osnadmin channel</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
  </body>
</html>