
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Logging Control &#8212; hyperledger-fabricdocs master documentation</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Securing Communication With Transport Layer Security (TLS)" href="enable_tls.html" />
    <link rel="prev" title="Error handling" href="error-handling.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="index.html">
    
      <p class="title">hyperledger-fabricdocs</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="intro.html">Introduction</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="whatsnew.html">What’s new in Hyperledger Fabric v2.x</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href=""></a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="key_concepts.html">Key Concepts</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="getting_started.html">Getting Started - Install</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="getting_started_run_fabric.html">Getting Started - Run Fabric</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="developapps/developing_applications.html">Developing Applications</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="tutorials.html">Tutorials</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="deployment_guide_overview.html">Deploying a production network</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="ops_guide.html">Operations Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="upgrade.html">Upgrading to the latest release</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="command_ref.html">Commands Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="architecture.html">Architecture Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="Fabric-FAQ.html">Frequently Asked Questions</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="CONTRIBUTING.html">Contributions Welcome!</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="glossary.html">Glossary</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="releases.html">Releases</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="questions.html">Still Have Questions?</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="status.html">Status</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          
            
                <li class="">
                    <a href="msp.html">Membership Service Providers (MSP)</a>
                </li>
            
          
            
                <li class="">
                    <a href="peer_ledger_snapshot.html">Taking ledger snapshots and using them to join channels</a>
                </li>
            
          
            
                <li class="">
                    <a href="hsm.html">Using a Hardware Security Module (HSM)</a>
                </li>
            
          
            
                <li class="">
                    <a href="configtx.html">Channel Configuration (configtx)</a>
                </li>
            
          
            
                <li class="">
                    <a href="endorsement-policies.html">Endorsement policies</a>
                </li>
            
          
            
                <li class="">
                    <a href="pluggable_endorsement_and_validation.html">Pluggable transaction endorsement and validation</a>
                </li>
            
          
            
                <li class="">
                    <a href="access_control.html">Access Control Lists (ACL)</a>
                </li>
            
          
            
                <li class="">
                    <a href="idemix.html">MSP Implementation with Identity Mixer</a>
                </li>
            
          
            
                <li class="">
                    <a href="idemixgen.html">Identity Mixer MSP configuration generator (idemixgen)</a>
                </li>
            
          
            
                <li class="">
                    <a href="operations_service.html">The Operations Service</a>
                </li>
            
          
            
                <li class="">
                    <a href="metrics_reference.html">Metrics Reference</a>
                </li>
            
          
            
                <li class="">
                    <a href="cc_launcher.html">External Builders and Launchers</a>
                </li>
            
          
            
                <li class="">
                    <a href="cc_service.html">Chaincode as an external service</a>
                </li>
            
          
            
                <li class="">
                    <a href="error-handling.html">Error handling</a>
                </li>
            
          
            
                <li class="active">
                    <a href="">Logging Control</a>
                </li>
            
          
            
                <li class="">
                    <a href="enable_tls.html">Securing Communication With Transport Layer Security (TLS)</a>
                </li>
            
          
            
                <li class="">
                    <a href="raft_configuration.html">Configuring and operating a Raft ordering service</a>
                </li>
            
          
            
                <li class="">
                    <a href="kafka_raft_migration.html">Migrating from Kafka to Raft</a>
                </li>
            
          
            
                <li class="">
                    <a href="kafka.html">Bringing up a Kafka-based Ordering Service</a>
                </li>
            
          
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#overview" class="nav-link">Overview</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#logging-specification" class="nav-link">Logging specification</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#logging-format" class="nav-link">Logging format</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#chaincode" class="nav-link">Chaincode</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="logging-control">
<h1>Logging Control<a class="headerlink" href="#logging-control" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Logging in the <code class="docutils literal notranslate"><span class="pre">peer</span></code> and <code class="docutils literal notranslate"><span class="pre">orderer</span></code> is provided by the
<code class="docutils literal notranslate"><span class="pre">common/flogging</span></code> package. This package supports</p>
<ul class="simple">
<li><p>Logging control based on the severity of the message</p></li>
<li><p>Logging control based on the software <em>logger</em> generating the message</p></li>
<li><p>Different pretty-printing options based on the severity of the
message</p></li>
</ul>
<p>All logs are currently directed to <code class="docutils literal notranslate"><span class="pre">stderr</span></code>. Global and logger-level
control of logging by severity is provided for both users and developers.
There are currently no formalized rules for the types of information
provided at each severity level. When submitting bug reports, developers
may want to see full logs down to the DEBUG level.</p>
<p>In pretty-printed logs the logging level is indicated both by color and
by a four-character code, e.g, “ERRO” for ERROR, “DEBU” for DEBUG, etc. In
the logging context a <em>logger</em> is an arbitrary name (string) given by
developers to groups of related messages. In the pretty-printed example
below, the loggers <code class="docutils literal notranslate"><span class="pre">ledgermgmt</span></code>, <code class="docutils literal notranslate"><span class="pre">kvledger</span></code>, and <code class="docutils literal notranslate"><span class="pre">peer</span></code> are
generating logs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">2018</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">38.268</span> <span class="n">UTC</span> <span class="p">[</span><span class="n">ledgermgmt</span><span class="p">]</span> <span class="n">initialize</span> <span class="o">-&gt;</span> <span class="n">INFO</span> <span class="mi">002</span> <span class="n">Initializing</span> <span class="n">ledger</span> <span class="n">mgmt</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">38.268</span> <span class="n">UTC</span> <span class="p">[</span><span class="n">kvledger</span><span class="p">]</span> <span class="n">NewProvider</span> <span class="o">-&gt;</span> <span class="n">INFO</span> <span class="mi">003</span> <span class="n">Initializing</span> <span class="n">ledger</span> <span class="n">provider</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">38.342</span> <span class="n">UTC</span> <span class="p">[</span><span class="n">kvledger</span><span class="p">]</span> <span class="n">NewProvider</span> <span class="o">-&gt;</span> <span class="n">INFO</span> <span class="mi">004</span> <span class="n">ledger</span> <span class="n">provider</span> <span class="n">Initialized</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">38.357</span> <span class="n">UTC</span> <span class="p">[</span><span class="n">ledgermgmt</span><span class="p">]</span> <span class="n">initialize</span> <span class="o">-&gt;</span> <span class="n">INFO</span> <span class="mi">005</span> <span class="n">ledger</span> <span class="n">mgmt</span> <span class="n">initialized</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">38.357</span> <span class="n">UTC</span> <span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="n">func1</span> <span class="o">-&gt;</span> <span class="n">INFO</span> <span class="mi">006</span> <span class="n">Auto</span><span class="o">-</span><span class="n">detected</span> <span class="n">peer</span> <span class="n">address</span><span class="p">:</span> <span class="mf">172.24</span><span class="o">.</span><span class="mf">0.3</span><span class="p">:</span><span class="mi">7051</span>
<span class="mi">2018</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">01</span> <span class="mi">15</span><span class="p">:</span><span class="mi">32</span><span class="p">:</span><span class="mf">38.357</span> <span class="n">UTC</span> <span class="p">[</span><span class="n">peer</span><span class="p">]</span> <span class="n">func1</span> <span class="o">-&gt;</span> <span class="n">INFO</span> <span class="mi">007</span> <span class="n">Returning</span> <span class="n">peer0</span><span class="o">.</span><span class="n">org1</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">7051</span>
</pre></div>
</div>
<p>An arbitrary number of loggers can be created at runtime, therefore there is
no “master list” of loggers, and logging control constructs can not check
whether logging loggers actually do or will exist.</p>
</div>
<div class="section" id="logging-specification">
<h2>Logging specification<a class="headerlink" href="#logging-specification" title="Permalink to this headline">¶</a></h2>
<p>The logging levels of the <code class="docutils literal notranslate"><span class="pre">peer</span></code> and <code class="docutils literal notranslate"><span class="pre">orderer</span></code> commands are controlled
by a logging specification, which is set via the <code class="docutils literal notranslate"><span class="pre">FABRIC_LOGGING_SPEC</span></code>
environment variable.</p>
<p>The full logging level specification is of the form</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="o">&lt;</span><span class="n">logger</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">logger</span><span class="o">&gt;...</span><span class="p">]</span><span class="o">=</span><span class="p">]</span><span class="o">&lt;</span><span class="n">level</span><span class="o">&gt;</span><span class="p">[:[</span><span class="o">&lt;</span><span class="n">logger</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">logger</span><span class="o">&gt;...</span><span class="p">]</span><span class="o">=</span><span class="p">]</span><span class="o">&lt;</span><span class="n">level</span><span class="o">&gt;...</span><span class="p">]</span>
</pre></div>
</div>
<p>Logging severity levels are specified using case-insensitive strings
chosen from</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">FATAL</span> <span class="o">|</span> <span class="n">PANIC</span> <span class="o">|</span> <span class="n">ERROR</span> <span class="o">|</span> <span class="n">WARNING</span> <span class="o">|</span> <span class="n">INFO</span> <span class="o">|</span> <span class="n">DEBUG</span>
</pre></div>
</div>
<p>A logging level by itself is taken as the overall default. Otherwise,
overrides for individual or groups of loggers can be specified using the</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">logger</span><span class="o">&gt;</span><span class="p">[,</span><span class="o">&lt;</span><span class="n">logger</span><span class="o">&gt;...</span><span class="p">]</span><span class="o">=&lt;</span><span class="n">level</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>syntax. Examples of specifications:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">info</span>                                        <span class="o">-</span> <span class="n">Set</span> <span class="n">default</span> <span class="n">to</span> <span class="n">INFO</span>
<span class="n">warning</span><span class="p">:</span><span class="n">msp</span><span class="p">,</span><span class="n">gossip</span><span class="o">=</span><span class="n">warning</span><span class="p">:</span><span class="n">chaincode</span><span class="o">=</span><span class="n">info</span>   <span class="o">-</span> <span class="n">Default</span> <span class="n">WARNING</span><span class="p">;</span> <span class="n">Override</span> <span class="k">for</span> <span class="n">msp</span><span class="p">,</span> <span class="n">gossip</span><span class="p">,</span> <span class="ow">and</span> <span class="n">chaincode</span>
<span class="n">chaincode</span><span class="o">=</span><span class="n">info</span><span class="p">:</span><span class="n">msp</span><span class="p">,</span><span class="n">gossip</span><span class="o">=</span><span class="n">warning</span><span class="p">:</span><span class="n">warning</span>   <span class="o">-</span> <span class="n">Same</span> <span class="k">as</span> <span class="n">above</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Logging specification terms are separated by a colon. If a term does not include a specific logger, for example <cite>info:</cite> then it is applied as the default log level
across all loggers on the component. The string <cite>info:dockercontroller,endorser,chaincode,chaincode.platform=debug</cite> sets
the default log level to <cite>INFO</cite> for all loggers and then the <cite>dockercontroller</cite>, <cite>endorser</cite>, <cite>chaincode</cite>, and
<cite>chaincode.platform</cite> loggers are set to <cite>DEBUG</cite>. The order of the terms does not matter. In the examples above,
the second and third options produce the same result although the order of the terms is reversed.</p>
</div>
</div>
<div class="section" id="logging-format">
<h2>Logging format<a class="headerlink" href="#logging-format" title="Permalink to this headline">¶</a></h2>
<p>The logging format of the <code class="docutils literal notranslate"><span class="pre">peer</span></code> and <code class="docutils literal notranslate"><span class="pre">orderer</span></code> commands is controlled
via the <code class="docutils literal notranslate"><span class="pre">FABRIC_LOGGING_FORMAT</span></code> environment variable. This can be set to
a format string, such as the default</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;%</span><span class="si">{color}</span><span class="s2">%{time:2006-01-02 15:04:05.000 MST} [%</span><span class="si">{module}</span><span class="s2">] %</span><span class="si">{shortfunc}</span><span class="s2"> -&gt; %</span><span class="si">{level:.4s}</span><span class="s2"> %</span><span class="si">{id:03x}</span><span class="s2">%{color:reset} %</span><span class="si">{message}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>to print the logs in a human-readable console format. It can be also set to
<code class="docutils literal notranslate"><span class="pre">json</span></code> to output logs in JSON format.</p>
</div>
<div class="section" id="chaincode">
<h2>Chaincode<a class="headerlink" href="#chaincode" title="Permalink to this headline">¶</a></h2>
<p><strong>Chaincode logging is the responsibility of the chaincode developer.</strong></p>
<p>As independently executed programs, user-provided chaincodes may technically
also produce output on stdout/stderr. While naturally useful for “devmode”,
these channels are normally disabled on a production network to mitigate abuse
from broken or malicious code. However, it is possible to enable this output
even for peer-managed containers (e.g. “netmode”) on a per-peer basis
via the CORE_VM_DOCKER_ATTACHSTDOUT=true configuration option.</p>
<p>Once enabled, each chaincode will receive its own logging channel keyed by its
container-id. Any output written to either stdout or stderr will be integrated
with the peer’s log on a per-line basis. It is not recommended to enable this
for production.</p>
<p>Stdout and stderr not forwarded to the peer container can be viewed from the
chaincode container using standard commands for your container platform.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">logs</span> <span class="o">&lt;</span><span class="n">chaincode_container_id</span><span class="o">&gt;</span>
<span class="n">kubectl</span> <span class="n">logs</span> <span class="o">-</span><span class="n">n</span> <span class="o">&lt;</span><span class="n">namespace</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">pod_name</span><span class="o">&gt;</span>
<span class="n">oc</span> <span class="n">logs</span> <span class="o">-</span><span class="n">n</span> <span class="o">&lt;</span><span class="n">namespace</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">pod_name</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="error-handling.html" title="previous page">Error handling</a>
    <a class='right-next' id="next-link" href="enable_tls.html" title="next page">Securing Communication With Transport Layer Security (TLS)</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
  </body>
</html>